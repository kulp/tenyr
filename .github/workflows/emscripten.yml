name: Emscripten

on:
  push:
    branches: [ develop ]
  pull_request:
    branches: [ develop ]

env:
  SDL: 0
  JIT: 0
  PEDANTIC: 0
  PLATFORM: emscripten
  EM_VERSION: 1.38.46

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      with:
        submodules: true
    - uses: mymindstorm/setup-emsdk@v10
      with:
        version: ${{env.EM_VERSION}}
    - run: make -j
    - run: make check_sw

